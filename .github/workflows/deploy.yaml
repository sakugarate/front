name: Deploy

on:
  push:
    branches:
      - main
  workflow_dispatch:


jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - name: commands on server
      uses: garygrossgarten/github-action-ssh@release
      with:
        host: ${{ secrets.SERVER_HOST }}
        username: ${{ secrets.SERVER_USER }}
        password: ${{ secrets.SERVER_PASSWORD }}
        command: |
          cd /root/sakurate/front &&
          git pull origin main &&
          cp ./dist/* /var/www/your-site/ -r &&
          sudo systemctl reload nginx
